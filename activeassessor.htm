<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link href='https://fonts.cdnfonts.com/css/transport-heavy' rel='stylesheet' type='text/css'>
<style>
	/* Force chat window to width 480px */
	/* Note: Cannot force height here as JS uses height attribute to make chat window open/close */
	.__8x8Chat-Container {
		width: 480px !important;
        box-shadow: -5px 5px 30px #444444 !important;
		inset: auto 10px 10px auto !important;
		border-radius: 0px;
	}

	/* Force chat to fill width of smart phone screen */
	@media screen and (max-width: 480px){
		.__8x8Chat-Container {
			width: 100% !important;
		}
	}
 </style>
</head>
<body bgcolor="#f6f6f6" style="width: 100%; max-width: 100%">

<img src="https://lazumc.github.io/images/activeassessor.jpg" width="100%">

<!-- Place this code snippet anywhere you want the button to appear in your page. If no button has been configured in the chat script, it will not show up nor take any space. -->
<div id="__8x8-chat-button-container-script_113114169966fbe1bc019698.42740957" style="visibility: hidden"></div>

<!-- This script will not interfere with the button layout, you just need to include it in the same page. It must also be within the <body> section of the page, preferably just before the ending tag. -->
<script type="text/javascript">
	window.__8x8Chat = {
        uuid: "script_113114169966fbe1bc019698.42740957",
        tenant: "cHNlbWVhaWNhZGVtbzAx",
        channel: "Active Assessor",
        channelUuid: "FVrNlSUPSFuY0wXlkKzz4w",
        domain: "https://vcc-eu12.8x8.com",
        path: "/.",
        buttonContainerId: "__8x8-chat-button-container-script_113114169966fbe1bc019698.42740957",
        stylesheetURL: "https://lazumc.github.io/activeassessor.css",
        align: "right",
        <!-- Triggered on initialisation to define window.bus which is  used to launch chat in custom button -->
		onInit: function (bus) {
		   window.bus = bus;
		   launchChat()
		}
    };

    (function() {
        var se = document.createElement("script");
        se.type = "text/javascript";
        se.async = true;
        se.src = window.__8x8Chat.domain + window.__8x8Chat.path + "/CHAT/common/js/chat.js";

        var os = document.getElementsByTagName("script")[0];
        os.parentNode.insertBefore(se, os);
    })();
    
    // New launchChat() function to invoke chat (note this requires the onInit section to define window.bus in the main chat script above to work.
	function launchChat() 
	{
		var userId = "none";
		var fullName = "none";
		var phone = "none";
		const urlParams = new URLSearchParams(window.location.search);
		const getUserId = urlParams.get('id');
		if (getUserId) {
			userId = getUserId
		};
		const getUserFullName = urlParams.get('fullName');
		if (getUserFullName) {
			userFullName = getUserFullName
		};
		const getUserPhone = urlParams.get('phone');
		if (getUserPhone) {
			userPhone = getUserPhone
		};
		bus.publish("customer:set-info", {"id": userId, "idType": "localCRM", fullName": userFullName, "phone": userPhone});
		bus.publish("chat:trigger-chat-window");
	}


</script>
</body>
</html> 